# CRUD Project (Java + Maven + Liquibase + MySQL in Docker)

## üì¶ –û–ø–∏—Å–∞–Ω–∏–µ

–ü—Ä–æ–µ–∫—Ç --- —ç—Ç–æ –ø—Ä–∏–º–µ—Ä CRUD-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∞ **Java (Maven)** —Å —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º
—Å—Ö–µ–º–æ–π –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ **Liquibase**.\
–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è —Å –ø–æ–º–æ—â—å—é **Docker Compose**:\
- **MySQL** --- –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö\
- **Maven App** --- –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è —Å–±–æ—Ä–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞ –∏ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–π
Liquibase

------------------------------------------------------------------------

## ‚öôÔ∏è –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

-   [Docker](https://www.docker.com/) ‚â• 20.x\
-   [Docker Compose](https://docs.docker.com/compose/) ‚â• v2\
-   (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) Maven –ª–æ–∫–∞–ª—å–Ω–æ, –µ—Å–ª–∏ –Ω—É–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å —Å–±–æ—Ä–∫—É –±–µ–∑ Docker

------------------------------------------------------------------------

## üöÄ –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

``` bash
git clone https://github.com/your-repo/crud-project.git
cd crud-project
```

### 2. –ó–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤

``` bash
docker compose up --build
```

–ü—Ä–∏ —Å—Ç–∞—Ä—Ç–µ:\
- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä **MySQL** —Å–æ–∑–¥–∞—Å—Ç –ø—É—Å—Ç—É—é –±–∞–∑—É `crud_db`.\
- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä **Maven** –≤—ã–ø–æ–ª–Ω–∏—Ç: - `mvn clean package` -
`mvn liquibase:update` ‚Üí –ø—Ä–∏–º–µ–Ω–∏—Ç –≤—Å–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –∏–∑
`db/changelog/db.changelog-master.xml`.

------------------------------------------------------------------------

## üóÑÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

–°—Ö–µ–º–∞ —Å–æ–∑–¥–∞—ë—Ç—Å—è **Liquibase** –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:

-   **writers** (id, first_name, last_name)\
-   **posts** (id, content, created, updated, status, writer_id) ‚Üí FK ‚Üí
    writers(id)\
-   **labels** (id, name) \[UNIQUE\]\
-   **post_labels** (post_id, label_id) ‚Üí FK ‚Üí posts(id), labels(id)

------------------------------------------------------------------------

## üìÇ –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

### –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã

``` bash
docker compose down
```

### –£–¥–∞–ª–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∏ –¥–∞–Ω–Ω—ã–µ

``` bash
docker compose down -v
```

### –í—ã–ø–æ–ª–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ –≤—Ä—É—á–Ω—É—é

``` bash
docker compose run --rm app mvn liquibase:update
```

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –±–∞–∑—ã

``` bash
docker compose exec db mysql -uappuser -papppass crud_db
```

------------------------------------------------------------------------

## üõ†Ô∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

–ë–∞–∑–∞ –¥–æ—Å—Ç—É–ø–Ω–∞:

-   –í–Ω—É—Ç—Ä–∏ Docker-—Å–µ—Ç–∏: `jdbc:mysql://db:3306/crud_db`\
-   –° —Ö–æ—Å—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è IDE): `jdbc:mysql://localhost:3307/crud_db`
    -   –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: `appuser`\
    -   –ü–∞—Ä–æ–ª—å: `apppass`

------------------------------------------------------------------------

## üìå –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

-   –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ö–µ–º—ã –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–ª—è—Ç—å –≤ **Liquibase changelog**
    (`src/main/resources/db/changelog/db.changelog-master.xml`).\
-   –ù–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ SQL-–¥–∞–º–ø—ã (`initdb.sql`), —Ç–∞–∫ –∫–∞–∫ —Å—Ö–µ–º—É —Ç–µ–ø–µ—Ä—å
    –ø–æ–ª–Ω–æ—Å—Ç—å—é –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç Liquibase.\
-   –î–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω-–æ–∫—Ä—É–∂–µ–Ω–∏–π –º–æ–∂–Ω–æ –≤—ã–Ω–µ—Å—Ç–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –≤
    –æ—Ç–¥–µ–ª—å–Ω—ã–µ `liquibase.properties` –∏–ª–∏ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å —á–µ—Ä–µ–∑
    `-Dliquibase.url=...`.
